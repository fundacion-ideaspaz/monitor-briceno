{% extends 'projects/base.html' %}
{% block title %}Proyectos{% endblock %}

{% load i18n %}
{% block body %}

{% if all_projects %}
<div class="main-container">
    <!-- Projects -->
    <div class="col-sm-12" align="center" id="projects_title">
        {% if request.user.is_superuser %}
        <h2>Listado general de proyectos </h2>
        {% if user.organization_logo %}
        <div class="container">
            <img id="user_logo" src="{{user.organization_logo.url}}" class="img-responsive" title="{{user.organization}}" width="200" height="100">
            <h4>{{user.organization}}</h4>
        </div>
        {% endif %}
        {% else %}
        <h2>Listado de proyectos de la organización </h2>
        {% endif %}
    </div>
    <div class="list-group">
        {% for project in all_projects %}
            <div class="col-sm-6 col-md-4 {{ project.closed }}" id="project_each">
                <div class="thumbnail list-group-item {% if project.closed %}disabled{% endif %}">
                    <div class="caption">
                        <div class="row">
                            <div class="col-sm-9">
                                <h3>Nombre: <a href="{% url 'projects:detail' project.id %}">{{ project.name }}</a></h3>
                            </div>
                            <div class="col-sm-3 vcenter" align="center" id="status_box">
                                {% if project.status == 2 or project.closed%}
                                <h6 style="background-color:red;">Finalizado</h6>
                                {% elif project.status == 0 %}
                                <h6 style="background-color:#56F1F1;">Por iniciar</h6>
                                {% else %}
                                <h6 style="background-color:#26E41F;">En curso</h6>
                                {% endif %}
                            </div>
                        </div>
                        {% if request.user.is_superuser %}
                        <h4>Creado por: {{ project.created_by.organization }}</h4>
                        {% endif %}
                        {% language 'es' %}
                        <h5 class="date">Fecha de inicio: {{ project.start_date|date:'D, d N' }}</h5>
                        <h5 class="date">Fecha de finalización: {{ project.end_date|date:'D, d N' }}</h5>
                        {% endlanguage %}
                        <!-- View Details -->
                        <a href="{% url 'projects:detail' project.id %}" class="btn btn-primary btn-sm" role="button">Ver Detalles</a>
                        <!--Update-->
                        <form action="{% url 'projects:project-update' project.id %}" style="display: inline;">
                            {% csrf_token %}
                            <input type="hidden" name="project_id" value="{{project.id}}"/>
                            <button type="submit" class="btn btn-default btn-sm">
                                <span class="glyphicon glyphicon-edit"></span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% cycle '' '' '' '' '' '<div class="clearfix visible-lg"></div>' %}
        {% endfor %}
    </div>
</div>
{% else %}
<div class="container-fluid" id="no_projects">
    <!-- There are none -->
    <div class="row">
        <div class="col-sm-12" align="center">
            <h3>Ningún proyecto ha sido cargado para esta organización.</h3>
        </div>
    </div>
</div>
{% endif %}

{% endblock %}
